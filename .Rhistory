}
}
)
)
) |>
dplyr::slice(-1)
colnames(mod_3_web_table)
mod_4_web_table <- mod_3_web_table %>%
mutate(
# Convert numeric columns
across(c(week, score_tm, score_opp,
starts_with("offense_"),
starts_with("defense_"),
starts_with("expected_points_")),
as.numeric))
mod_4_web_table <- mod_3_web_table %>%
mutate(
# Convert numeric columns
across(c(week, score_1, score_2, #changed from tm, opp
starts_with("offense_"),
starts_with("defense_"),
starts_with("expected_points_")),
as.numeric))
mod_5_web_table <- mod_4_web_table  %>%
mutate(
game_outcome = as.factor(game_outcome),
game_location = case_when(
game_location == "@" ~ "away",
game_location == "" ~ "home",
TRUE ~ game_location
) %>%
as.factor()
) %>%
filter(day != "")
View(mod_5_web_table)
mod_4_web_table <- mod_3_web_table %>%
mutate(
# Convert numeric columns
across(c(week, score_1, score_2, #changed from tm, opp
starts_with("offense_"),
starts_with("defense_"),
starts_with("expected_points_")),
as.numeric))
View(mod_5_web_table)
??setNames
??names
knitr::opts_chunk$set(echo = TRUE)
first_row <- web_table %>%
dplyr::slice(1)
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
web_table <- int_web_table %>%
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
first_row <- web_table %>%
dplyr::slice(1)
View(first_row)
??map2_chr
View(mod_1_web_table)
mod_1_web_table <- web_table %>%
setNames(
purrr::map2_chr(
names(web_table),
first_row,
~if(startsWith(.x, "col")){.y} else {.x}
)
)
View(web_table)
View(mod_1_web_table)
View(mod_1_web_table)
web_table <- int_web_table %>%
rename_with(~ make.unique(if_else(. == "", "col", .)))
View(int_web_table)
web_table <- int_web_table %>%
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
View(web_table)
??set_names
??rename()
View(mod_2_web_table)
??make_clean_names
??across()
View(mod_4_web_table)
View(mod_5_web_table)
git pull
??setNames
knitr::opts_chunk$set(echo = TRUE)
web_table <- int_web_table %>%
janitor::clean_names()
web_table <- int_web_table |>
janitor::clean_names()
web_table1 <- int_web_table %>%
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
web_table1 <- int_web_table |>
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
web_table1 <- int_web_table |>
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
web_table1 <- int_web_table |>
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
int_web_table <- web_tables|>
purrr::pluck(2)
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables|>
purrr::pluck(2)
web_table1 <- int_web_table |>
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
web_table <- int_web_table |>
stats::setNames(make.unique(if_else(names(.) == "", "col", names(.))))
web_table <- int_web_table |>
janitor::clean_names()
View(web_table)
??clean_names
df_cleaned <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- as.character(int_web_table[1, .x])
part2 <- as.character(int_web_table[2, .x])
str_c(part1, part2, sep = "_")
})
library(rvest)
library(tidyverse)
library(httr)
library(dplyr)
library(purrr)
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- as.character(int_web_table[1, .x])
part2 <- as.character(int_web_table[2, .x])
str_c(part1, part2, sep = "_")
})
df_cleaned <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2, sep = "_")
})
df_cleaned <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2)
})
df_cleaned <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2, sep = "_")
})
df_cleaned <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2, sep = "_")
})
df_cleaned <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(tidyverse)
library(httr)
library(dplyr)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables|>
purrr::pluck(2)
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
View(web_tables)
View(web_tables)
new_colnames <- map_chr(seq_along(int_web_table), ~ {
part1 <- names(int_web_table)[.x]
part2 <- as.character(int_web_table[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
int_web_table_temp <- int_web_table |>
janitor::clean_names()
new_colnames <- map_chr(seq_along(int_web_table_temp), ~ {
part1 <- names(int_web_table_temp)[.x]
part2 <- as.character(int_web_table_temp[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
View(int_web_table)
View(int_web_table_temp)
int_web_table_temp <- int_web_table |>
janitor::clean_names()
new_colnames <- map_chr(seq_along(int_web_table_temp), ~ {
part1 <- names(int_web_table_temp)[.x]
part2 <- as.character(int_web_table_temp[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
int_web_table_temp <- int_web_table |>
janitor::clean_names()
new_colnames <- map_chr(seq_along(int_web_table_temp), ~ {
part1 <- names(int_web_table_temp)[.x]
part2 <- as.character(int_web_table_temp[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table_temp %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
View(web_table)
knitr::opts_chunk$set(echo = TRUE)
int_web_table_temp <- int_web_table |>
janitor::clean_names()
new_colnames <- map_chr(seq_along(int_web_table_temp), ~ {
part1 <- names(int_web_table_temp)[.x]
part2 <- as.character(int_web_table_temp[1, .x])
str_c(part1, part2, sep = "_")
})
web_table <- int_web_table_temp %>%
slice(-c(1, 2)) %>%
setNames(janitor::make_clean_names(new_colnames))
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(stringr)
library(rlang)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
inital_col_names <- colnames(int_web_table)
first_row_names <- int_web_table[1,]
new_colnames <- paste(inital_col_names,first_row_names,sep="_") %>%
str_trim() %>%
str_to_lower()
new_colnames[6] <- "game_location"
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(stringr)
library(rlang)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
inital_col_names <- colnames(int_web_table)
first_row_names <- int_web_table[1,]
new_colnames <- paste(inital_col_names,first_row_names,sep="_") %>%
str_trim() %>%
str_to_lower()
new_colnames[6] <- "game_location"
colnames(int_web_table) <- new_colnames
mod_4_web_table <- mod_3_web_table %>%
mutate(
# Convert numeric columns
across(c(week, score_2, score_3,
starts_with("offense_"),
starts_with("defense_"),
starts_with("expected_points_")),
as.numeric))
View(int_web_table)
web_table1 <- int_web_table %>%
filter(`_rk` =! "")
web_table1 <- int_web_table %>%
slice(-1)
web_table1 <- int_web_table %>%
filter(`_rk` != "")
web_table1 <- int_web_table %>%
mutate(
# Convert numeric columns
across(c(_week, score_pts, score_ptso,
web_table1 <- int_web_table %>%
mutate(
across(c(_week, score_pts, score_ptso,
web_table1 <- int_web_table %>%
mutate(
across(c(_week, score_pts, score_ptso,
web_table1 <- int_web_table %>%
mutate(
across(c(`_week`, score_pts, score_ptso,
starts_with("offense_"),
starts_with("defense_"),
starts_with("expected_points_")),
as.numeric))
new_colnames
inital_col_names <- colnames(int_web_table)
first_row_names <- int_web_table[1,]
new_colnames <- paste(inital_col_names,first_row_names,sep="_") %>%
str_trim() %>%
str_to_lower()
new_colnames[6] <- "game_location"
new_colnames[21] <- "passing_yds_sk"
colnames(int_web_table) <- new_colnames
web_table1 <- int_web_table %>%
filter(`_rk` != "")
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(stringr)
library(rlang)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
inital_col_names <- colnames(int_web_table)
first_row_names <- int_web_table[1,]
new_colnames <- paste(inital_col_names,first_row_names,sep="_") %>%
str_trim() %>%
str_to_lower()
new_colnames[6] <- "game_location"
new_colnames[21] <- "passing_yds_sk"
knitr::opts_chunk$set(echo = TRUE)
library(rvest)
library(httr)
library(dplyr)
library(stringr)
library(rlang)
library(purrr)
## Createtion of URL
team_name <- "was"
year <- 2023
generic_url <- paste0("https://www.pro-football-reference.com/teams/",team_name,"/",year,".htm#all_games")
## Special Note 1: Maybe Optional (Further Research is needed on its relevance)
# request_details <- "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
# response <- GET(url, user_agent(request_details),timeout(20))
webpage <- generic_url %>%
rvest::read_html()
web_tables <- webpage %>%
rvest::html_table()
int_web_table <- web_tables %>%
purrr::pluck(2)
View(int_web_table)
inital_col_names <- colnames(int_web_table)
first_row_names <- int_web_table[1,]
new_colnames <- paste(inital_col_names,first_row_names,sep="_") %>%
str_trim() %>%
str_to_lower()
new_colnames[6] <- "game_location"
new_colnames[21] <- "passing_yds_sk"
colnames(int_web_table) <- new_colnames
web_table1 <- int_web_table %>%
filter(`_rk` != "")
web_table1 <- int_web_table %>%
mutate(
across(c(`_week`, score_pts, score_ptso,
starts_with("offense_"),
starts_with("defense_"),
starts_with("expected_points_")),
as.numeric))
View(web_table1)
web_table1 <- int_web_table %>%
slice(-1)
View(web_table1)
??slice
web_table1 <- int_web_table %>%
slice_head() |>
slice_tail
web_table1 <- int_web_table %>%
slice_head() |>
slice_tail()
View(web_table1)
web_table1 <- int_web_table %>%
slice(2,18)
View(web_table1)
web_table1 <- int_web_table %>%
slice(2:18)
View(web_table1)
View(int_web_table)
web_table2 <- int_web_table %>%
mutate(
across(where(is.character), ~suppressWarnings(as.numeric(.))))
View(web_table2)
web_table2 <- web_table1 %>%
mutate(
across(where(is.character), ~suppressWarnings(as.numeric(.))))
View(web_table1)
View(web_table2)
web_table2 <- web_table1 %>%
mutate(
across(where(~ all(grepl("^\\s*-?\\d*\\.?\\d+\\s*$", .x))), ~ as.numeric(.)))
View(web_table2)
web_table3 <- web_table2  %>%
mutate(
score_rslt = as.factor(score_rslt),
game_location = case_when(
game_location == "@" ~ "away",
game_location == "" ~ "home",
TRUE ~ game_location
) %>%
as.factor()
)
web_table4 <- web_table3 |>
rename_with(~ str_replace(., "^_", ""), .cols = starts_with("_"))
View(web_table4)
View(web_table4)
